<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Lecture1:Overview about Zeroknowledge - World of Z2O-K7E</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../../../index.html">TOC</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Halo2</li><li class="chapter-item expanded "><a href="../../halo2/0xparc halo2.html"><strong aria-hidden="true">1.</strong> 0xparc halo2</a></li><li class="chapter-item expanded "><a href="../../halo2/1. Simple Examples.html"><strong aria-hidden="true">2.</strong> 1.Simple Examples</a></li><li class="chapter-item expanded "><a href="../../halo2/2. Fibonacci (halo2-hope).html"><strong aria-hidden="true">3.</strong> 2.Fibonacci(halo2-hope)</a></li><li class="chapter-item expanded "><a href="../../halo2/3. Fibonacci (ex1+ex2).html"><strong aria-hidden="true">4.</strong> 3. Fibonacci (ex1+ex2)</a></li><li class="chapter-item expanded "><a href="../../halo2/4. IsZero Check (ex3).html"><strong aria-hidden="true">5.</strong> 4. IsZero Check (ex3)</a></li><li class="chapter-item expanded "><a href="../../halo2/halo2 Source Code.html"><strong aria-hidden="true">6.</strong> halo2 Source Code</a></li><li class="chapter-item expanded "><a href="../../halo2/StarLi halo2.html"><strong aria-hidden="true">7.</strong> StarLi halo2</a></li><li class="chapter-item expanded affix "><li class="part-title">Folding Schemes</li><li class="chapter-item expanded "><a href="../../Nova/SuperNova.html"><strong aria-hidden="true">8.</strong> SuperNova</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">zk-everything</li><li class="chapter-item expanded "><a href="../../zk-everything/BabySNARK tutorial.html"><strong aria-hidden="true">9.</strong> BabySNARK tutorial</a></li><li class="chapter-item expanded "><a href="../../zk-everything/zk-learning-miles/KZG.html"><strong aria-hidden="true">10.</strong> KZG</a></li><li class="chapter-item expanded "><a href="../../zk-everything/zk-learning-miles/Lecture1:Overview about Zeroknowledge.html" class="active"><strong aria-hidden="true">11.</strong> Lecture1:Overview about Zeroknowledge</a></li><li class="chapter-item expanded "><a href="../../zk-everything/zk-learning-miles/Lecture2:Introduction to Modern SNARKs.html"><strong aria-hidden="true">12.</strong> Lecture2:Introduction to Modern SNARKs</a></li><li class="chapter-item expanded "><a href="../../zk-everything/zk-learning-miles/Lecture12:ZKEVM.html"><strong aria-hidden="true">13.</strong> Lecture12:ZKEVM</a></li><li class="chapter-item expanded "><a href="../../zk-everything/zk-learning-miles/Lecture16:Hardware acceleration.html"><strong aria-hidden="true">14.</strong> Lecture16:Hardware acceleration</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">ZKP Public Goods</li><li class="chapter-item expanded "><a href="../../public goods/第二章.html"><strong aria-hidden="true">15.</strong> ch2</a></li><li class="chapter-item expanded "><a href="../../public goods/4-Proving-System.html"><strong aria-hidden="true">16.</strong> ch4-Proving System</a></li><li class="chapter-item expanded "><a href="../../public goods/5-plonk-intro.html"><strong aria-hidden="true">17.</strong> ch5-plonk-intro</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">World of Z2O-K7E</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous">
<h1 id="lecture1introduction-to-zero-knowledge-interactive-proofs"><a class="header" href="#lecture1introduction-to-zero-knowledge-interactive-proofs">Lecture1:Introduction to Zero knowledge Interactive Proofs</a></h1>
<h1 id="np"><a class="header" href="#np">NP</a></h1>
<h2 id="np-proof"><a class="header" href="#np-proof">NP Proof:</a></h2>
<p>NP-proofs 属于可高效验证的 proofs.其中要求</p>
<p>1.Witness 的长度应当是 statement x 的长度的多项式表示.</p>
<p>2.Verifier 时间是 x 长度的多项式函数表示</p>
<p><img src="static/KuMzbk2G0oupOoxt1UbchJW9n4c.png" alt="" /></p>
<h2 id="np-proofs-例子"><a class="header" href="#np-proofs-例子">NP proofs 例子</a></h2>
<p>上述例子都可以用一种通用的语言关系 L 来表示</p>
<p>更具体而言,上述都是 NP 问题:(简单来说,求解困难,但是验证高效的问题)</p>
<blockquote>
<ul>
<li>P NP  NPC
<ul>
<li>P 问题：指能在多项式时间求解出的问题.如 2SAT,欧拉路径,PATH 问题</li>
<li>NP:Nondeterministic polynominal(非确定性多项式)
一个问题不能确定是否能够在多项式时间内找到一个解。但若给出一个解，能在多项式时间内证明这个解是否正确 .如果找到一个解，那么 NP 问题就变成了 P 问题，所以 P∈NP 类  注：NP 问题不能理解为非 P 问题
著名的 NP 类问题：旅行家推销问题(TSP)。即有一个推销员，要到 n 个城市推销商品，他要找出一个包含所有 n 个城市的环路，这个环路路径小于 a。如果单纯的用枚举法来列举的话会有(n-1)! 种，已经不是多项式时间的算法了，阶乘比多项式复杂。假设有人猜几次就猜中了一条小于长度 a 的路径，TSP 问题解决了。可是，人们不可能每次都猜的那么准。所以说，这是一个 NP 类问题。也就是，我们能在多项式的时间内验证并得出问题的正确解，可是我们却不知道（非不存在）该问题是否存在一个多项式时间的算法能解决
<strong>NP****问题的本质是单向性，不可快速求解，但是能够快速验证</strong>。</li>
<li>NPC：
规约：问题 A 可以转化为问题 B，对于难度而言，问题 B 比问题 A 要困难。规约具有传递性：A 规约至 B，B 规约至 C，那么 A 规约至 C。一直规约下便会得到 NPC 问题
所有的 NP 问题都可以约化成 NPC 问题。只要解决了这个问题，那么所有的 NP 问题都解决了。NPC 需要满足两个条件.1：是一个 NP 问题 2：所有的 NP 问题都可以约化到它。如 SAT 问题、HAMPATH 问题都属于 NPC 问题.</li>
<li>NP-hard 问题
它满足 NPC 问题定义的第二条但不一定要满足第一条（就是说，NP-Hard 问题要比 NPC 问题的范围广，NP-Hard 问题没有限定属于 NP），即所有的 NP 问题都能约化到它，但是它不一定是一个 NP 问题</li>
<li>P NP NPC NP-hard 关系
<img src="static/DOolbStxQoXsHrxcSVHcWoGGnZd.png" alt="" /></li>
</ul>
</li>
</ul>
</blockquote>
<h2 id="np-language-定义"><a class="header" href="#np-language-定义">NP Language 定义:</a></h2>
<p><img src="static/LiRWbV4U3oLqdFxn2cNchZyNnDf.png" alt="" /></p>
<p>给定二元关系<span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mclose"><span class="mclose">}</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mclose"><span class="mclose">}</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span></span></span></span></span>,记语言 L(R)为集合<span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∃</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mord mathnormal">s</span><span class="mord">.</span><span class="mord mathnormal">t</span><span class="mord">.</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">}</span></span></span></span>.称一 个语言 L(R) 是 NP 语言当如下两个条件成立:</p>
<ul>
<li>|w|=poly(|x|)</li>
<li>给定任意的 x、w, 存在多项式时间算法能够高效判定 R(x, w) =? 1</li>
</ul>
<p><strong>注:此时还与零知识无关</strong></p>
<p>考虑有没有其他方式,比如在大素数分解 N=PQ 中,不暴露 P 或 Q 的值让验证者相信这些类型的定理</p>
<h1 id="zkp"><a class="header" href="#zkp">ZKP</a></h1>
<p>引入<strong>交互</strong>与<strong>随机</strong></p>
<p><img src="static/Uwm9bYzRxoVaNsxTiiQcDfTHnCh.png" alt="" /></p>
<p><strong>交互</strong></p>
<p>验证者不再被动地阅读证明，相反验证者会与证明者进行重要的交互。</p>
<p>Prover 与 Verifier 之间进行<strong>多项式步骤的****交互</strong></p>
<p><strong>随机</strong></p>
<p>Verifier 不再是一个<strong>确定性</strong>的算法</p>
<p>Verifier 的问题通过抛硬币的方式,即问题在某种程度上是不可预测的</p>
<p>随机性的本质是接受小概率的错误,但这种概率应当被量化,比如小于某一个可忽略函数.</p>
<h2 id="例子"><a class="header" href="#例子">例子</a></h2>
<p>参考<a href="https://zhuanlan.zhihu.com/p/75936137">郭宇老师的初识「零知识」与「证明」—— 探索零知识证明系列（一)</a>:地图三染色问题</p>
<h2 id="definitions-of-zeroknowledge-interactive-proof"><a class="header" href="#definitions-of-zeroknowledge-interactive-proof">Definitions of Zeroknowledge interactive Proof</a></h2>
<h3 id="1interactive-proof-system-for-a-language-l"><a class="header" href="#1interactive-proof-system-for-a-language-l">1.Interactive Proof system for a Language L</a></h3>
<p><img src="static/VxxlbSlIOoLHzOxKrefcig8znGd.png" alt="" /></p>
<p>可忽略函数:一个比任何多项式函数分之一增长都慢的函数</p>
<h2 id="zero-knowledge"><a class="header" href="#zero-knowledge">Zero knowledge</a></h2>
<p>谈论零知识前,需要引入<strong>模拟器</strong>的概念.</p>
<p>这里参考<a href="https://zhuanlan.zhihu.com/p/76849956">郭宇老师--从「模拟」理解零知识证明：平行宇宙与时光倒流---探索零知识证明系列（二）</a>,而不使用课程的例子.</p>
<h3 id="模拟器simulator"><a class="header" href="#模拟器simulator">模拟器:Simulator</a></h3>
<p><img src="static/LVTwbBNxHoxvtJxdOLxcchK6nuD.png" alt="" /></p>
<p>简单来说</p>
<p>**现实世界/视图:**是一个概率分布.这个空间中的点都是证明者和验证者之间交互的所有可能历史加上验证者的硬币投掷。</p>
<p><strong>理想世界/视图</strong>:也是一个概率分布.<code>但理想世界/视图需要是算法可构造的</code>,由 Simulator 负责构造.</p>
<p>理想世界/视图与现实世界/视图的<strong>差异</strong>在于:理想世界/视图没有知识,现实世界/视图拥有知识.</p>
<p>对于一个多项式时间的<strong>区分器</strong>，它从上述分布中选择一个样本.如果区分器不能区分这个样本来自哪个分布,即来自哪个世界/视图,我们说这样的交互协议是零知识的.</p>
<p><strong>因为理想世界/视图中的 Zlice 是没有任何知识，而且她和真实世界/视图中的 Alice 不可区分.</strong></p>
<p>或者说区分成功的概率不大于 0.5.那么这两个分布在计算上是无法区分的。</p>
<blockquote>
<p>Simulator 是怎么做到这一点的?
Simulator 能够而是因为它可以&quot;倒序&quot;生成 <code>视图/世界</code>,即 Simulator 可以先随机选择一个挑战，然后基于这个挑战生成证明的一部分。这样生成的视图在统计上与真实的视图无法区分。</p>
</blockquote>
<h3 id="计算不可区分定义"><a class="header" href="#计算不可区分定义">计算不可区分定义:</a></h3>
<p>这里给出更一般的计算不可区分定义</p>
<p><img src="static/GppnbN47go1Nl6x70brcTUcFnNb.png" alt="" /></p>
<p>这里的<strong>安全参数 k</strong> 表示<strong>某个计算困难问题的困难问题实例输入大小</strong>。每个困难问题都有一个界，当输入大小超过这个界时，我们就认为这个问题是计算困难的。--具体可参考<a href="https://www.zhihu.com/question/48949270">刘巍然老师的回答</a></p>
<h3 id="zero-knowledge-define"><a class="header" href="#zero-knowledge-define">Zero Knowledge Define:</a></h3>
<p><img src="static/PpCJb35kiosU0xxTkaocbzOSn3b.png" alt="" /></p>
<h3 id="flavor-of-zero-knowledge"><a class="header" href="#flavor-of-zero-knowledge">Flavor of Zero Knowledge</a></h3>
<p>零知识分类</p>
<p><img src="static/ZAYbbCVfgoGDSTxGy2gcmJ4sn0d.png" alt="" /></p>
<p>这里不给出形式化定义,简单来说即</p>
<p>两个随机变量的分布是计算不可区分的，也就是任何多项式时间的随机敌手都无法区分这两个分布，就称这个证明系统是<strong>计算零知识 (Computationally Zero-Knowledge)</strong></p>
<p>两个随机变量的分布是统计不可区分的，也就是它们的统计距离 (Statistical Distance) 可忽略，就称这个证明系统是<strong>统计零知识 (Statistically Zero-Knowledge)</strong> 的；</p>
<p>如果统计距离就是 0，又叫做<strong>完美零知识 (Perfect Zero-Knowledge)</strong> 的；</p>
<h2 id="proof-of-knowledge"><a class="header" href="#proof-of-knowledge">Proof of Knowledge</a></h2>
<p>一个 Proof System 是 POK 的,需满足以下定义</p>
<p><img src="static/HZpPbdlJXo03RbxeYfkcKCVzncf.png" alt="" /></p>
<p><code>需要引入抽取器,抽取器具有时光回溯的能力.</code></p>
<p>抽取器 在理想世界中，通过时间倒流的超能力，把 Prover 的知识完整地抽取出来</p>
<blockquote>
<p>注:抽取器可以提取出 witness，不是因为它具有<strong>无限的计算能力</strong>,而是因为它能与证明者进行多次交互。在每一轮的交互中，抽取器都会选择一个新的挑战，然后记录下 Prover 的回应。</p>
</blockquote>
<p>这就保证了一个没有知识的 Prover 是无法让抽取器达成目标，从而证明了可靠性。</p>
<blockquote>
<p>抽取器只能从能成功完成证明的证明者那里提取出（witness）。如果一个 Prover 不能成功完成证明，那么他可能并不知道一个有效的 witness，因此抽取器无法从 Prover 那提取出 witness。</p>
</blockquote>
<p>把这样一个依靠采用抽取器来证明可靠性的证明系统被称为 <strong>Proof of Knowledge</strong></p>
<blockquote>
<p>注:不是所有的可靠性都必须要求存在抽取器算法</p>
</blockquote>
<p>这里可参考<a href="https://github.com/sec-bit/learning-zkp/blob/master/zkp-intro/3/zkp-pok.md">郭宇老师:探索零知识证明系列（三）:寻找知识</a></p>
<h3 id="the-first-applicationidentity-theft"><a class="header" href="#the-first-applicationidentity-theft">The First Application:Identity Theft</a></h3>
<p>Alice 想通过互联网证明向 Bob 证明其就是 Alice,比如 Bob 是亚马逊的.</p>
<p><img src="static/IcAcbe01vobGqYxHvfwc54PBnAS.png" alt="" /></p>
<p>思想是:将证明 Alice 的身份转为 Alice 证明一道特定的难题,谁知道这个难题的答案谁就是 Alice.</p>
<h2 id="np-and-zero-knowledge-interactive-proof"><a class="header" href="#np-and-zero-knowledge-interactive-proof">NP and Zero Knowledge Interactive Proof</a></h2>
<p>结论:如果<a href="https://en.wikipedia.org/wiki/One-way_function">单向函数</a>(简单来说 is easy to compute on every input, but hard to <a href="https://en.wikipedia.org/wiki/Inverse_function">invert</a> given the <a href="https://en.wikipedia.org/wiki/Image_(mathematics)">image</a> of a random input,具体参考 wiki)存在,那么每种 NP 语言都具有零知识交互证明。</p>
<p><img src="static/LZWVbdV7qo1QWwx46RYco5n5njP.png" alt="" /></p>
<p>先引入承诺的概念</p>
<h3 id="承诺"><a class="header" href="#承诺">承诺</a></h3>
<p><img src="static/BVg5b0KWEov22PxNVTqcxxu6nAe.png" alt="" /></p>
<h4 id="承诺性质"><a class="header" href="#承诺性质">承诺性质</a></h4>
<ul>
<li>
<p><strong>Hiding:意味着敌手获得承诺 c(m)后无法获得 m 的值</strong></p>
<ul>
<li>computational hiding:对于任意的 PPT 敌手 A.有
<img src="static/UkWvbRHxaopvXbxwiE0cNmulnhH.png" alt="" /></li>
<li>Perfect hiding:将 A 的计算能力修改为无穷算力,“≤ negl(λ)”替换为 0</li>
</ul>
</li>
<li>
<p><strong>Binding:是指一个承诺 c(m) 在 Open 阶段打开只会为一个值 m 而不会得到 m‘.</strong></p>
<ul>
<li>computational  Binding
<img src="static/MKyGbu5U9ovgmNxUpvtclaM8nZb.png" alt="" /></li>
<li>perfect binding::将 A 的计算能力修改为无穷算力,“≤ negl(λ)”替换为 0</li>
</ul>
</li>
</ul>
<h3 id="举例地图三染色问题"><a class="header" href="#举例地图三染色问题">举例:地图三染色问题</a></h3>
<p>地图的三染色问题是一个 NP 完全问题,即 NPC 问题.</p>
<p><strong>生动易懂的例子</strong>仍然可以参考<a href="https://zhuanlan.zhihu.com/p/75936137">郭宇老师的初识「零知识」与「证明」—— 探索零知识证明系列（一)</a>:</p>
<p>过程总结如下:</p>
<p><img src="static/JP4BbuxDGo2f2PxIKvocE8cVnnf.png" alt="" /></p>
<p>性质如下</p>
<p><img src="static/EylBbTWMcox2VNxfg1hccF1Nngg.png" alt="" /></p>
<p><strong>完整性</strong>:一个诚实的 P 总是可以说服验证者接受。因为无论 Vr 需要哪条边，P 总是可以正确地给出符合规则的上色方案。 总是接受</p>
<p>**健全性:**无论 恶意的 P *做什么，都会有一条边缘的颜色不正确。当 V 选择随机边时，实际上选中错误的概率是 1/E,成功骗过 P 的概率是(1-1/E).随着重复的次数增多,成功的概率变为<span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0991em;vertical-align:-0.25em;"></span><span class="mord">1/</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span></span></span></span>,呈指数级降低。概率接受</p>
<p><strong>零知识性:<strong>很容易能够看出来,整个过程验证者得到了很多信息,但是这些信息并不会帮助验证者获取地图三染色问题答案的</strong>知识</strong>.但形式化证明很麻烦。</p>
<blockquote>
<p><code>模拟器</code> 不知道染色答案,它可以提前确定诚实 V 会询问的边 E‘
<code>模拟器</code> 可以将整个图都涂成一样的颜色,除了 E’的两端 a,b 会被涂成两种不同的颜色.
对于<strong>模拟世界/视图</strong>:它会输出一堆承诺,由于承诺的性质,这些承诺不会给<strong>计算能力有限</strong>的 <code>区分器</code> 提供任何信息.然后 <code>区分器</code> 随机选择一条边 E,由于模拟器能够提前知道区分器随机选择哪条边.所以 E=E‘. 打开 E/E‘的承诺以后,V 会发现 a,b 是不同的颜色.<code>模拟器</code> 成功完成该轮挑战
但实际上,<code>模拟器</code> 并不知道染色答案,但是 V 每次打开 E 的承诺,对应的 a,b 端点颜色又确实是不一样的.所以<strong>真实世界/视图</strong>与<strong>模拟世界/视图</strong>在计算上是无法区分的.</p>
</blockquote>
<p><img src="static/VJCEbdWdZomUCNxfQRDcofisnLg.png" alt="" /></p>
<h2 id="zk-的应用"><a class="header" href="#zk-的应用">zk 的应用</a></h2>
<p>法律 隐私 生物 DNA 甚至是核裁军</p>
<p><img src="static/Wm6Ub4QnSoXnGRxu05hc3Wy2nOc.png" alt="" /></p>
<h1 id="复杂性理论complexity-theory"><a class="header" href="#复杂性理论complexity-theory">复杂性理论(Complexity Theory)</a></h1>
<h2 id="interactive-proof"><a class="header" href="#interactive-proof">Interactive Proof</a></h2>
<p><img src="static/Qk9xbvVEmoXEWOxIQ10cd66xnbf.png" alt="" /></p>
<ul>
<li>
<p>BPP:复杂类 BPP 在多项式时间内对概率图灵机解出的问题的集合, 并且对所有的输入，输出结果有错误的概率在 1/3 之内
<img src="static/YOmnbQfzxoJgGNxm9LDcmz3kngc.png" alt="" /></p>
</li>
<li>
<p>IP:交互式证明</p>
<ul>
<li>是一种包含了两个参与者（证明者和验证者）的验证系统，其中证明者试图通过多轮对话来说服验证者某个复杂陈述的真实性。</li>
<li>定义
<ul>
<li>设⟨A, B⟩ 为一对交互式图灵机. 记 ⟨A(y), B(z)⟩(x) 为在 A、B 的随机输入带均匀独立选取, 公共输入为 x, A 的辅助输入为 y, B 的辅助输入为 z 时, 图灵机 B 与图灵机 A 交互后输出的随机变量.</li>
<li>给定二元关系 R 及其对应语言 L(R), 则针对该语言的 IPS(interactive proof systems)是用符号⟨P(y),V(z)⟩表示 .其中,图灵机 P 与 P*可以是无穷算力 V 是 PPT 的.则 IPS 满足两个性质
<ul>
<li>完备性 (completeness): 对于任意的 x ∈ L(R), 存在 y, 使得对于任意的 <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mclose"><span class="mclose">}</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mopen">[⟨</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mclose">)⟩</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mopen">(</span><span class="mord">∣</span><span class="mord mathnormal">x</span><span class="mord">∣</span><span class="mclose">)</span></span></span></span>. 完美完备性 (perfect completeness) 是指上述概率等 于 1.</li>
<li>可靠性 (soundness): 对于任意的 x ∈/ L(R), 任意的恶意证明者 P*, 任意的<span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mclose"><span class="mclose">}</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">有</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mopen">[⟨</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mclose">)⟩</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mopen">(</span><span class="mord">∣</span><span class="mord mathnormal">x</span><span class="mord">∣</span><span class="mclose">)</span></span></span></span>.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>IP 与 NP 的关系</p>
<ul>
<li>IP 类可以看作是经典复杂类 NP 的<strong>交互式****随机</strong>变体,所有的 NP 问题也都可以在 IP 中找到解决方案，因此 IP 是 NP 的超集。</li>
<li>在 IP 系统中，Prover 和 Verifier 之间有多轮的交互，而在 NP 问题中，证明（或解决方案）一旦生成，就可以独立地被验证，不需要进一步的交互。如果不允许交互，但允许验证者抛掷随机硬币并以小概率接受错误的证明，那么得到的复杂性类被称为 <a href="https://www.cs.cornell.edu/courses/cs6810/2009sp/scribe/lecture17.pdf">Merlin-Arthur(MA)</a></li>
</ul>
<blockquote>
<p>这再次说明了 IP 强大的关键在于<strong>随机性</strong>和<strong>交互</strong>的结合</p>
</blockquote>
<ul>
<li><strong>Prover</strong> 在 IP 中并没有时间复杂度的限制，可以是全知的，这意味着它可能运行在超出概率多项式时间的时间复杂度。它能够进行<strong>任意复杂的计算</strong>来构建它的证明，只要这个证明能够在多项式时间内被验证</li>
<li><strong>Verifier</strong> 在 IP 中必须运行在<strong>概率多项式时间</strong>（probabilistic polynomial time）内，即必须在多项式时间内完成计算</li>
</ul>
</li>
</ul>
<h2 id="private-coins-model"><a class="header" href="#private-coins-model">Private Coins Model</a></h2>
<h2 id="interactive-proofs-with-public-coins-model"><a class="header" href="#interactive-proofs-with-public-coins-model">Interactive Proofs with Public Coins Model</a></h2>
<p>“We can formulate a decision problem under uncertainty as a new sort of game, in which one opponent is ‘disinterested’ and plays at random, while the other tries to pick a strategy which maximizes the probability of winning – a ‘game against Nature’.” <strong>---Christos Papadimitriou</strong>. Games Against Nature. FOCS 1983.</p>
<p><img src="static/RH2hbHTJJoQzPIxPrPycutMBngc.png" alt="" /></p>
<p><img src="static/UOZsbegjRo1D2TxzlKjce8vinoe.png" alt="" /></p>
<p>如果不允许交互，但允许验证者抛掷随机硬币并以小概率接受错误的证明，那么得到的复杂性类被称为 <a href="https://www.cs.cornell.edu/courses/cs6810/2009sp/scribe/lecture17.pdf">Merlin-Arthur(MA)</a></p>
<h3 id="am-与-ma"><a class="header" href="#am-与-ma">AM 与 MA</a></h3>
<ul>
<li>Arthur-Merlin Protocol</li>
</ul>
<p>协议中的两个参与者分别称为 Arthur 和 Merlin，基本假设是 Arthur 是配备随机数生成设备的标准计算机（或验证器），而 Merlin 实际上是具有无限计算能力的预言机（也称为证明者）。不过，Merlin 不一定是诚实的，所以亚瑟必须分析 Merlin 在回答亚瑟的询问时提供的信息，并自行决定问题。如果在这个协议中，每当答案是“是”时，Merlin 有一系列的回应，会导致 Arthur 在至少 2/3 的情况下接受，那么问题被认为是可以通过这个协议解决的。而如果答案是“否”，那么 Arthur 永远不会在超过 1/3 的情况下接受。</p>
<ul>
<li>MA</li>
</ul>
<p>1-message protocol</p>
<p>Merlin 向 Arthur 发送消息，然后 Arthur 通过运行概率多项式时间计算来决定是否接受。（这类似于基于验证器的 NP 定义，唯一的区别是 Arthur 在这里被允许使用随机性。Merlin 在这个协议中无法访问 Arthur 的硬币抛掷，因为它是一个单消息协议，Arthur 只有在收到 Merlin 的信息后才会抛硬币。</p>
<p>从形式上讲如果存在多项式时间确定性图灵机 M 和多项式 p，q 使得对于长度 n = |x| 的每个输入字符串 x，</p>
<p><img src="static/IPYxbgdRRoTq7wxdBNyco2yjnJF.png" alt="" /></p>
<ul>
<li>AM</li>
</ul>
<p>复杂度类 AM（或 AM[<strong>2</strong>]或 AM[<strong>K</strong>]）可以通过具有<strong>两条/K 条</strong>消息的 Arthur-Merlin 协议在多项式时间内决定。只有 <strong>1/2/K 个查询/响应对</strong>：Arthur 随机抛出一些硬币并将他所有抛硬币的结果发送给 Merlin，Merlin 用所谓的证明做出回应，Arthur 确定性地验证证明。</p>
<p>在这个协议中，Arthur 只被允许将抛硬币的结果发送给 Merlin，在最后阶段，Arthur 必须只使用他之前生成的随机抛硬币和 Merlin 的信息来决定是接受还是拒绝</p>
<p>从形式上讲如果存在多项式时间确定性图灵机 M 和多项式 p，q 使得对于长度 n = |x| 的每个输入字符串 x</p>
<p><img src="static/ZQ98bITzoopLZJx90fwcz3yCnee.png" alt="" /></p>
<p>简单总结:</p>
<blockquote>
<p>摘自啊咪咪小熊---
MA 就是最简单的 M 给 A 发完就结束了，A 自己决定是否接受，就是非交互式的（和 NP 的区别就是 Verifier 可以用随机数）。
AM 就是 A 先给 M 发一个随机数，然后 M 再给 A 回复，然后 A 再决定是否接受，就是交互式的</p>
</blockquote>
<h2 id="ip--pspace-定理"><a class="header" href="#ip--pspace-定理">IP = PSPACE 定理</a></h2>
<p>任何可以在多项式<strong>空间</strong>内解决的问题都可以通过交互式证明的方式来解决。</p>
<p>具体可参照<a href="https://en.wikipedia.org/wiki/IP_(complexity)">这</a>,这个假设的重要性在于它将两个看似不同的计算模型联系在了一起.</p>
<p>其中 PSPACE 简单理解为是比 NP 要大得多的语言类</p>
<p><img src="static/NkWsbE6kGoRQ4ixzhY4cAiFLnvh.png" alt="" /></p>
<h2 id="mip"><a class="header" href="#mip">MIP</a></h2>
<p>MIP 类似于 IP，只是有多个证明者，并且假设这些证明者不会相互共享关于他们从验证者那里收到什么挑战的信息。MIP 的一个比喻是在审讯犯罪嫌疑人之前将多个犯罪嫌疑人放在不同的房间里，看看他们是否能保持他们的故事直截了当。对 MIP 的研究表明，如果一个人将证明者锁在不同的房间里，然后分别审问他们，他们可以说服审问者做出比一起接受审问要复杂得多的陈述。</p>
<p><img src="static/QWLobspUboiQUJxr1NpcW9SsnTh.jpg" alt="" /></p>
<h2 id="non-interactive-proof"><a class="header" href="#non-interactive-proof">Non Interactive Proof</a></h2>
<p><img src="static/AZSMbGIfiosLTXxnP8lcucU1noc.png" alt="" /></p>
<p>通过 <a href="https://en.wikipedia.org/wiki/Fiat%E2%80%93Shamir_heuristic">Fiat-Shamir</a> 转换将 Interactive Proof 变为 Non-Interactive Proof</p>
<p><strong>注:</strong></p>
<p><img src="static/S2Mfbj7vmoEXU0xXdOQclIqLntq.png" alt="" /></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../zk-everything/zk-learning-miles/KZG.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../../zk-everything/zk-learning-miles/Lecture2:Introduction to Modern SNARKs.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../zk-everything/zk-learning-miles/KZG.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../../zk-everything/zk-learning-miles/Lecture2:Introduction to Modern SNARKs.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
